/*CREATE DATABASE TELEPI;*/
USE TELEPI;

/*CREATE TABLE CIUDAD(
COD_C INT PRIMARY KEY,
NOM_C VARCHAR(20));

CREATE TABLE RESTAURANTE(
COD_R INT PRIMARY KEY,
NOM_R VARCHAR(20),
DIR VARCHAR(30),
CAP INT,
COD_C INT, 
FOREIGN KEY (COD_C) REFERENCES CIUDAD (COD_C));

CREATE TABLE EMPLEADO(
COD_E INT PRIMARY KEY,
NOM_E VARCHAR(20),
EDAD INT,
COD_C INT,
FOREIGN KEY (COD_C) REFERENCES CIUDAD (COD_C));

CREATE TABLE TRABAJA(
COD_R INT,
COD_E INT,
FECHA DATE, 
SALARIO INT,
PRIMARY KEY (COD_R, COD_E, FECHA),
FOREIGN KEY (COD_E) REFERENCES EMPLEADO (COD_E),
FOREIGN KEY (COD_R) REFERENCES RESTAURANTE (COD_R));*/

/*INSERT INTO CIUDAD VALUES ("1", "BILBAO"), ("2", "GETXO"), ("3", "LEIOA");
INSERT INTO RESTAURANTE VALUES ("1", "LA POSADA", "GRAN VIA", "200", "1"), ("2", "EL TENEDOR", "ITURRIBIDE", "300", "1"), ("3", "LA GALEA", "LOS CHOPOS", "50", "2"), ("4", "KRUNCH ARTEA", "PAGOA", "100", "3");
INSERT INTO EMPLEADO VALUES ("111", "GORKA", "25", "1"), ("222", "SAIOA", "45", "1"), ("333", "JUAN", "17", "2"), ("444", "FELIX", "55", "3"), ("555", "IOSUNE", "24", "3");
INSERT INTO TRABAJA VALUES ("1", "111", "1993-02-12", "700"), ("2", "111", "1993-09-13", "800"), ("4", "222", "1994-07-23", "1000"), ("2", "111", "1987-03-29", "850"), ("1", "444", "1993-08-09", "1800");*/

/*1. OBTEN TODOS LOS RESTAURANTES*/
/*SELECT * FROM RESTAURANTE;*/
/*2. OBTEN TODAS LAS CIUDADES*/
/*SELECT * FROM CIUDAD;*/
/*3. OBTEN TODOS LOS EMPLEADOS*/
/*SELECT * FROM EMPLEADO;*/
/*4. OBTEN LOS EMPLEADOS CON LA EDAD ENTRE 24 Y 50*/
/*SELECT * FROM EMPLEADO WHERE EDAD BETWEEN 24 AND 50;
SELECT * FROM EMPLEADO WHERE EDAD (EDAD>=24) AND (EDAD <= 50);
/*5. OBTEN TODOS LOS NOMBRES QUE CONTENGAN LA O EN SU NOMBRE*/
/*SELECT * FROM EMPLEADO WHERE NOM_E LIKE '%O%';*/
/*6. MEDIA DE LOS SALARIOS*/
/*SELECT AVG (SALARIO) FROM TRABAJA;*/
/*7. OBTENER LA EDAD DEL EMPLEADO MAS JOVEN*/
/*SELECT MIN(EDAD) FROM EMPLEADO;*/
/*8. OBTEN EL NOMBRE DE LOS RESTAURANTES ORDENADO DE MAYOR A MENOR CAPACIDAD*/
/*SELECT NOM_R FROM RESTAURANTE  ORDER BY CAP;*/
/*9. Obtén el nombre y la dirección de los restaurantes de Bilbao.*/
/*SELECT NOM_R,DIR FROM RESTAURANTE,CIUDAD WHERE NOM_C='BILBAO' IN (RESTAURANTE.COD_C = CIUDAD.COD_C);*/
/*10. Obtén la fecha en la que trabajo la empleada 111 en el restaurante 1*/
/*SELECT FECHA FROM TRABAJA WHERE COD_E= 111 AND COD_R= 1;*/
/*11 -Obtén el código de los empleados de Leioa.*/
/*SELECT E.COD_E FROM EMPLEADO E JOIN TRABAJA T ON E.COD_E = T.COD_E JOIN RESTAURANTE R ON T.COD_R = R.COD_R WHERE R.DIR = "Leioa";*/
/*12. Obtén el nombre de los empleados ordenados por edad*/
/*SELECT NOM_E FROM EMPLEADO ORDER BY EDAD;*/
/*13. Obtén el salario del empleado con código 333 en el restaurante con código 3.*/
/*SELECT T.SALARIO FROM TRABAJA T WHERE E.COD_E = 333 AND R.COD_R = 3;*/
/*14. Obtén el nombre del empleado con mayor salario que trabaja en el restaurante La Galea.*/
/*SELECT NOM_E FROM EMPLEADO WHERE COD_E = (SELECT COD_E FROM TRABAJA WHERE COD_R = (SELECT COD_R FROM RESTAURANTE WHERE NOM_R = 'LA GALEA') AND COD_E = (SELECT COD_E FROM TRABAJA WHERE SALARIO = (SELECT MAX(SALARIO) FROM TRABAJA)));*/
/*15. Obtén los nombres de los empleados que viven en Getxo (realiza la consulta de tres maneras diferentes).*/
/*SELECT NOM_E FROM EMPLEADO WHERE COD_C = (SELECT COD_C FROM CIUDAD WHERE NOM_C = 'GETXO');
SELECT E.NOM_E FROM EMPLEADO E JOIN CIUDAD C ON E.COD_C = C.COD_C WHERE C.NOM_C = 'GETXO';
SELECT E.NOM_E FROM EMPLEADO E, CIUDAD C WHERE C.COD_C= E.COD_C AND NOM_C = 'GETXO';*/
/*16- Obtén la fecha en la que Gorka trabajó en el Tenedor.*/
/*SELECT FECHA FROM TRABAJA WHERE COD_E = (SELECT COD_E FROM EMPLEADO WHERE NOM_E = 'GORKA') AND COD_R = (SELECT COD_R FROM RESTAURANTE WHERE NOM_R = 'EL TENEDOR');*/
/*17- Obtén los nombres de los empleados que trabajan en restaurantes de Bilbao.*/
/*SELECT E.NOM_E FROM EMPLEADO E,, RESTAURANTE R, TRABAJA T, CIUDAD C WHERE T.COD_R = R.COD_R AND E.COD_C = C.COD_C AND C.NOM_C = 'BILBAO';*/
/*18. Obtén la media de la capacidad de los restaurantes de Bilbao.*/
/*SELECT AVG(CAP) FROM RESTAURANTE WHERE COD_C = (SELECT COD_C FROM CIUDAD WHERE NOM_C = 'BILBAO');*/
/*19. Obtén los nombres de las ciudades en las que viven los empleados del restaurante La Galea (realiza la consulta de tres maneras diferentes).*/
/*SELECT C.NOM_C FROM CIUDAD C JOIN EMPLEADO E ON C.COD_C = E.COD_C JOIN TRABAJA T ON E.COD_E = T.COD_E WHERE T.COD_R = (SELECT COD_R FROM RESTAURANTE WHERE NOM_R = 'LA GALEA');
SELECT NOM_C FROM CIUDAD WHERE COD_C IN (SELECT COD_C FROM EMPLEADO WHERE COD_E IN (SELECT COD_E FROM TRABAJA WHERE COD_R = (SELECT COD_R FROM RESTAURANTE WHERE NOM_R = 'LA GALEA')));
SELECT C.NOM_C FROM CIUDAD C WHERE C.COD_C IN (SELECT E.COD_C FROM EMPLEADO E JOIN TRABAJA T ON E.COD_E = T.COD_E WHERE T.COD_R = (SELECT COD_R FROM RESTAURANTE WHERE NOM_R = 'LA GALEA'));*/
/*20. Actualiza el nombre de la empleada con código 222 por el de Saioa Maria.*/
/*UPDATE EMPLEADO SET NOM_E = 'SAIOA MARIA' WHERE COD_E = 222;/*
/*21. Añade el campo población a la tabla ciudad.*/
/*ALTER TABLE CIUDAD ADD POBLACION INT;*/
/*22. Añade las siguientes poblaciones a la tabla ciudad:
 BILBAO = 40000
 GETXO=30000
 LEIOA=20000*/
/*UPDATE CIUDAD SET POBLACION = 40000 WHERE COD_C = "01";
UPDATE CIUDAD SET POBLACION = 30000 WHERE COD_C = "02";
UPDATE CIUDAD SET POBLACION = 20000 WHERE COD_C = "03"; 
/*23. Borra las tablas*/
/*DROP TABLE CIUDAD, EMPLEADO, RESTAURANTE, CIUDAD;*/
